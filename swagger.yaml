openapi: 3.0.3
info:
  title: InfoHub API - Plataforma E-commerce Completa
  description: |
    API completa do InfoHub - Plataforma de E-commerce com IA, Rede Social e Sistema de Promo√ß√µes.
    
    ## üöÄ Funcionalidades Principais
    
    ### üì¶ **E-commerce Completo**
    - **Produtos**: Cadastro, busca, categoriza√ß√£o
    - **Carrinho**: Adicionar, remover, finalizar compra
    - **Pedidos**: Hist√≥rico, rastreamento, status
    - **Pagamentos**: Integra√ß√£o Stripe, PIX, cart√µes
    
    ### üí∞ **Sistema de Promo√ß√µes**
    - **Promo√ß√µes Ativas**: Lista de ofertas em tempo real
    - **Melhores Ofertas**: Ranking por desconto
    - **Alertas**: Notifica√ß√µes para produtos favoritados
    
    ### ü§ñ **Intelig√™ncia Artificial**
    - **Chat IA**: Busca inteligente de promo√ß√µes
    - **Recomenda√ß√µes**: Produtos personalizados
    - **An√°lise**: Comportamento de compra
    
    ### üåê **Rede Social**
    - **Posts**: Compartilhar produtos e experi√™ncias
    - **Coment√°rios**: Intera√ß√£o entre usu√°rios
    - **Curtidas**: Sistema de engagement
    - **Feed**: Timeline personalizada
    
    ### ‚≠ê **Avalia√ß√µes e Favoritos**
    - **Avalia√ß√µes**: Sistema de notas e coment√°rios
    - **Favoritos**: Lista de produtos desejados
    - **Ranking**: Produtos mais bem avaliados
    
    ## üèóÔ∏è Arquitetura
    - **Backend**: Node.js/Express (porta 8080)
    - **Banco**: MySQL com Prisma ORM
    - **IA**: Groq API para processamento
    - **Pagamentos**: Stripe API
    - **Email**: Nodemailer
    
    ## üîê Autentica√ß√£o
    Rotas protegidas requerem JWT token no header:
    ```
    Authorization: Bearer <token>
    ```
    
    ## üìã M√≥dulos Dispon√≠veis
    1. **üë• Usu√°rios**: Cadastro, login, perfil
    2. **üè™ Estabelecimentos**: Lojas e vendedores
    3. **üì¶ Produtos**: Cat√°logo completo
    4. **üõí E-commerce**: Carrinho, pedidos, pagamentos
    5. **üí∞ Promo√ß√µes**: Ofertas e descontos
    6. **üåê Rede Social**: Posts, coment√°rios, curtidas
    7. **‚≠ê Avalia√ß√µes**: Notas e reviews
    8. **‚ù§Ô∏è Favoritos**: Lista de desejos
    9. **ü§ñ IA**: Chat inteligente
    10. **üîë Recupera√ß√£o**: Reset de senhas
    
  version: 2.0.0
  contact:
    name: InfoHub Team
    email: support@infohub.com
  license:
    name: ISC
    
servers:
  - url: http://localhost:8080/v1/infohub
    description: API Principal (Node.js)

tags:
  - name: üë• Usu√°rios
    description: Gerenciamento completo de usu√°rios
  - name: üè™ Estabelecimentos
    description: Gerenciamento de lojas e vendedores
  - name: üìç Endere√ßos
    description: Endere√ßos de usu√°rios e entrega
  - name: üì¶ Produtos
    description: Cat√°logo de produtos
  - name: üè∑Ô∏è Categorias
    description: Organiza√ß√£o por categorias
  - name: üõí Carrinho
    description: Carrinho de compras
  - name: üìã Pedidos
    description: Gest√£o de pedidos
  - name: üí≥ Pagamentos
    description: Processamento de pagamentos
  - name: üí∞ Promo√ß√µes
    description: Sistema de ofertas e descontos
  - name: üåê Rede Social
    description: Posts, coment√°rios e intera√ß√µes
  - name: ‚≠ê Avalia√ß√µes
    description: Sistema de avalia√ß√µes e reviews
  - name: ‚ù§Ô∏è Favoritos
    description: Lista de produtos favoritos
  - name: üìß Notifica√ß√µes
    description: Sistema de notifica√ß√µes
  - name: ü§ñ Chat IA
    description: Assistente virtual inteligente
  - name: üîê Autentica√ß√£o
    description: Login e autentica√ß√£o JWT
  - name: üîë Recupera√ß√£o de Senha
    description: Reset de senhas por email

components:
  schemas:
    Categoria:
      type: object
      properties:
        id_categoria:
          type: integer
          format: int64
          example: 1
        nome:
          type: string
          example: "Eletr√¥nicos"
        total_produtos:
          type: integer
          example: 5
    
    CategoriaComProdutos:
      type: object
      properties:
        id_categoria:
          type: integer
          format: int64
          example: 1
        nome:
          type: string
          example: "Eletr√¥nicos"
        total_produtos:
          type: integer
          example: 2
        produtos:
          type: array
          items:
            type: object
            properties:
              id_produto:
                type: integer
                example: 1
              nome:
                type: string
                example: "Smartphone"
              descricao:
                type: string
                example: "Smartphone √∫ltimo modelo"
              preco:
                type: number
                format: double
                example: 999.99
              preco_promocional:
                type: number
                format: double
                example: 899.99
              data_inicio_promocao:
                type: string
                format: date
                example: "2025-10-01"
              data_fim_promocao:
                type: string
                format: date
                example: "2025-10-31"
    Usuario:
      type: object
      required:
        - nome
        - email
        - senha
      properties:
        id:
          type: integer
          description: ID √∫nico do usu√°rio
          example: 1
        nome:
          type: string
          description: Nome completo do usu√°rio
          example: "Jo√£o Silva"
        email:
          type: string
          format: email
          description: Email √∫nico do usu√°rio
          example: "joao@email.com"
        senha:
          type: string
          format: password
          description: Senha do usu√°rio (hash)
          example: "123456"
        data_nascimento:
          type: string
          format: date
          description: Data de nascimento
          example: "1990-05-15"
        telefone:
          type: string
          description: Telefone do usu√°rio
          example: "(11) 99999-9999"
        
    UsuarioResponse:
      type: object
      properties:
        status:
          type: boolean
          example: true
        status_code:
          type: integer
          example: 200
        message:
          type: string
          example: "Usu√°rio criado com sucesso"
        data:
          $ref: '#/components/schemas/Usuario'
          
    LoginRequest:
      type: object
      required:
        - email
        - senha
      properties:
        email:
          type: string
          format: email
          example: "joao@email.com"
        senha:
          type: string
          format: password
          example: "123456"
          
    LoginResponse:
      type: object
      properties:
        status:
          type: boolean
          example: true
        status_code:
          type: integer
          example: 200
        message:
          type: string
          example: "Login realizado com sucesso"
        token:
          type: string
          description: JWT token para autentica√ß√£o
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        user:
          $ref: '#/components/schemas/Usuario'
          
    RecuperacaoSenhaRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
          description: Email para recupera√ß√£o
          example: "joao@email.com"
          
    ValidarCodigoRequest:
      type: object
      required:
        - email
        - codigo
      properties:
        email:
          type: string
          format: email
          example: "joao@email.com"
        codigo:
          type: string
          description: C√≥digo de 6 d√≠gitos enviado por email
          example: "123456"
          
    RedefinirSenhaRequest:
      type: object
      required:
        - email
        - codigo
        - nova_senha
      properties:
        email:
          type: string
          format: email
          example: "joao@email.com"
        codigo:
          type: string
          description: C√≥digo validado
          example: "123456"
        nova_senha:
          type: string
          format: password
          description: Nova senha do usu√°rio
          example: "novaSenha123"
          
    CategoriaRequest:
      type: object
      required:
        - nome
      properties:
        nome:
          type: string
          description: Nome da categoria
          example: "Eletr√¥nicos"

    CategoriaResponse:
      type: object
      properties:
        status:
          type: boolean
          example: true
        status_code:
          type: integer
          example: 201
        message:
          type: string
          example: "Categoria criada com sucesso"
        id:
          type: integer
          example: 1

    CategoriasListResponse:
      type: object
      properties:
        status:
          type: boolean
          example: true
        status_code:
          type: integer
          example: 200
        categorias:
          type: array
          items:
            $ref: '#/components/schemas/Categoria'
        message:
          type: string
          nullable: true

    CategoriaDetailResponse:
      type: object
      properties:
        status:
          type: boolean
          example: true
        status_code:
          type: integer
          example: 200
        categoria:
          $ref: '#/components/schemas/Categoria'
        message:
          type: string
          nullable: true

    CategoriasComProdutosResponse:
      type: object
      properties:
        status:
          type: boolean
          example: true
        status_code:
          type: integer
          example: 200
        categorias:
          type: array
          items:
            $ref: '#/components/schemas/CategoriaComProdutos'
        message:
          type: string
          nullable: true

    CategoriaComProdutosDetailResponse:
      type: object
      properties:
        status:
          type: boolean
          example: true
        status_code:
          type: integer
          example: 200
        categoria:
          $ref: '#/components/schemas/CategoriaComProdutos'
        message:
          type: string
          nullable: true

    EnderecoUsuario:
      type: object
      properties:
        id_endereco:
          type: integer
          format: int64
          example: 1
        id_usuario:
          type: integer
          example: 1
        cep:
          type: string
          example: "01234-567"
        logradouro:
          type: string
          example: "Rua das Flores"
        numero:
          type: string
          example: "123"
        complemento:
          type: string
          example: "Apto 45"
        bairro:
          type: string
          example: "Centro"
        cidade:
          type: string
          example: "S√£o Paulo"
        estado:
          type: string
          example: "SP"
        latitude:
          type: number
          format: double
          example: -23.5505199
        longitude:
          type: number
          format: double
          example: -46.6333094
        nome_usuario:
          type: string
          example: "Jo√£o Silva"
        email_usuario:
          type: string
          example: "joao@email.com"

    EnderecoUsuarioRequest:
      type: object
      required:
        - id_usuario
        - cep
      properties:
        id_usuario:
          type: integer
          description: ID do usu√°rio
          example: 1
        cep:
          type: string
          description: CEP do endere√ßo
          example: "01234-567"
        logradouro:
          type: string
          description: Nome da rua/avenida
          example: "Rua das Flores"
        numero:
          type: string
          description: N√∫mero do endere√ßo
          example: "123"
        complemento:
          type: string
          description: Complemento do endere√ßo
          example: "Apto 45"
        bairro:
          type: string
          description: Bairro
          example: "Centro"
        cidade:
          type: string
          description: Cidade
          example: "S√£o Paulo"
        estado:
          type: string
          description: Estado (UF)
          example: "SP"
        latitude:
          type: number
          format: double
          description: Latitude para localiza√ß√£o
          example: -23.5505199
        longitude:
          type: number
          format: double
          description: Longitude para localiza√ß√£o
          example: -46.6333094

    EnderecoUsuarioResponse:
      type: object
      properties:
        status:
          type: boolean
          example: true
        status_code:
          type: integer
          example: 201
        message:
          type: string
          example: "Endere√ßo criado com sucesso"
        id:
          type: integer
          example: 1

    EnderecosUsuarioListResponse:
      type: object
      properties:
        status:
          type: boolean
          example: true
        status_code:
          type: integer
          example: 200
        enderecos:
          type: array
          items:
            $ref: '#/components/schemas/EnderecoUsuario'
        message:
          type: string
          nullable: true

    EnderecoUsuarioDetailResponse:
      type: object
      properties:
        status:
          type: boolean
          example: true
        status_code:
          type: integer
          example: 200
        endereco:
          $ref: '#/components/schemas/EnderecoUsuario'
        message:
          type: string
          nullable: true

    Produto:
      type: object
      properties:
        id_produto:
          type: integer
          format: int64
          example: 1
        nome:
          type: string
          example: "Smartphone Samsung Galaxy"
        descricao:
          type: string
          example: "Smartphone com 128GB de armazenamento"
        id_categoria:
          type: integer
          example: 1
        categoria:
          type: string
          example: "Eletr√¥nicos"
        preco:
          type: number
          format: double
          example: 999.99
        id_estabelecimento:
          type: integer
          example: 1
        preco_promocional:
          type: number
          format: double
          example: 899.99
        data_inicio:
          type: string
          format: date
          example: "2025-10-01"
        data_fim:
          type: string
          format: date
          example: "2025-10-31"

    ProdutoRequest:
      type: object
      required:
        - nome
        - id_categoria
        - id_estabelecimento
        - preco
      properties:
        nome:
          type: string
          description: Nome do produto
          example: "Smartphone Samsung Galaxy"
        descricao:
          type: string
          description: Descri√ß√£o do produto
          example: "Smartphone com 128GB de armazenamento"
        id_categoria:
          type: integer
          description: ID da categoria
          example: 1
        id_estabelecimento:
          type: integer
          description: ID do estabelecimento
          example: 1
        preco:
          type: number
          format: double
          description: Pre√ßo do produto
          example: 999.99
        promocao:
          type: object
          description: Dados da promo√ß√£o (opcional)
          properties:
            preco_promocional:
              type: number
              format: double
              example: 899.99
            data_inicio:
              type: string
              format: date
              example: "2025-10-01"
            data_fim:
              type: string
              format: date
              example: "2025-10-31"

    ProdutoResponse:
      type: object
      properties:
        status:
          type: boolean
          example: true
        status_code:
          type: integer
          example: 201
        message:
          type: string
          example: "Produto criado com sucesso"
        id:
          type: integer
          example: 1

    ProdutosListResponse:
      type: object
      properties:
        status:
          type: boolean
          example: true
        status_code:
          type: integer
          example: 200
        produtos:
          type: array
          items:
            $ref: '#/components/schemas/Produto'
        message:
          type: string
          nullable: true

    ProdutoDetailResponse:
      type: object
      properties:
        status:
          type: boolean
          example: true
        status_code:
          type: integer
          example: 200
        produto:
          $ref: '#/components/schemas/Produto'
        message:
          type: string
          nullable: true

    Estabelecimento:
      type: object
      properties:
        id_estabelecimento:
          type: integer
          format: int64
          example: 1
        nome:
          type: string
          example: "Supermercado Central"
        cnpj:
          type: string
          example: "12.345.678/0001-90"
        telefone:
          type: string
          example: "(11) 3333-4444"
        data_cadastro:
          type: string
          format: date-time
          example: "2025-10-09T10:30:00Z"

    EstabelecimentoRequest:
      type: object
      required:
        - nome
        - cnpj
      properties:
        nome:
          type: string
          description: Nome do estabelecimento
          example: "Supermercado Central"
        cnpj:
          type: string
          description: CNPJ do estabelecimento
          example: "12.345.678/0001-90"
        telefone:
          type: string
          description: Telefone do estabelecimento
          example: "(11) 3333-4444"

    EstabelecimentoResponse:
      type: object
      properties:
        status:
          type: boolean
          example: true
        status_code:
          type: integer
          example: 201
        message:
          type: string
          example: "Estabelecimento criado com sucesso"
        id:
          type: integer
          example: 1

    EstabelecimentosListResponse:
      type: object
      properties:
        status:
          type: boolean
          example: true
        status_code:
          type: integer
          example: 200
        estabelecimentos:
          type: array
          items:
            $ref: '#/components/schemas/Estabelecimento'
        message:
          type: string
          nullable: true

    EstabelecimentoDetailResponse:
      type: object
      properties:
        status:
          type: boolean
          example: true
        status_code:
          type: integer
          example: 200
        estabelecimento:
          $ref: '#/components/schemas/Estabelecimento'
        message:
          type: string
          nullable: true
          example: "quais as promo√ß√µes?"
        user_id:
          type: integer
          description: ID do usu√°rio
          example: 1
        session_id:
          type: string
          description: ID da sess√£o
          example: "session_123"
          
    FastChatResponse:
      type: object
      properties:
        reply:
          type: string
          description: Resposta da IA
          example: "üõí Encontrei 3 promo√ß√µes perto de voc√™!"
        confidence:
          type: number
          format: float
          description: Confian√ßa da resposta
          example: 0.95
        response_time_ms:
          type: integer
          description: Tempo de resposta
          example: 50
        method:
          type: string
          description: M√©todo usado pela IA
          example: "promotion_search"
        toolsUsed:
          type: array
          items:
            type: string
          example: ["classifier", "find_promotions"]
          
    ErrorResponse:
      type: object
      properties:
        status:
          type: boolean
          example: false
        status_code:
          type: integer
          example: 400
        message:
          type: string
          example: "Erro na requisi√ß√£o"
        error:
          type: string
          description: Detalhes do erro
          example: "Campo obrigat√≥rio n√£o informado"

    # ===============================
    # SCHEMAS DE E-COMMERCE
    # ===============================
    
    # CARRINHO
    CarrinhoItem:
      type: object
      properties:
        id_carrinho:
          type: integer
          example: 1
        id_usuario:
          type: integer
          example: 1
        id_produto:
          type: integer
          example: 1
        id_estabelecimento:
          type: integer
          example: 1
        quantidade:
          type: integer
          example: 2
        data_adicao:
          type: string
          format: date-time
          example: "2025-11-11T10:30:00Z"
        produto:
          $ref: '#/components/schemas/Produto'
        valor_total:
          type: number
          format: double
          example: 19.98
    
    AdicionarCarrinhoRequest:
      type: object
      required:
        - id_usuario
        - id_produto
        - id_estabelecimento
        - quantidade
      properties:
        id_usuario:
          type: integer
          example: 1
        id_produto:
          type: integer
          example: 1
        id_estabelecimento:
          type: integer
          example: 1
        quantidade:
          type: integer
          minimum: 1
          example: 2

    # PEDIDOS
    Pedido:
      type: object
      properties:
        id_pedido:
          type: integer
          example: 1
        id_usuario:
          type: integer
          example: 1
        status:
          type: string
          enum: ["pendente", "confirmado", "em_preparacao", "enviado", "entregue", "cancelado"]
          example: "confirmado"
        valor_total:
          type: number
          format: double
          example: 59.97
        data_pedido:
          type: string
          format: date-time
          example: "2025-11-11T10:30:00Z"
        metodo_pagamento:
          type: string
          example: "cartao_credito"
        itens:
          type: array
          items:
            $ref: '#/components/schemas/ItemPedido'
    
    CriarPedidoRequest:
      type: object
      required:
        - id_usuario
        - id_endereco_entrega
        - metodo_pagamento
      properties:
        id_usuario:
          type: integer
          example: 1
        id_endereco_entrega:
          type: integer
          example: 1
        metodo_pagamento:
          type: string
          enum: ["cartao_credito", "cartao_debito", "pix", "boleto"]
          example: "cartao_credito"

    # PROMO√á√ïES
    Promocao:
      type: object
      properties:
        id_promocao:
          type: integer
          example: 1
        id_produto:
          type: integer
          example: 1
        id_estabelecimento:
          type: integer
          example: 1
        tipo_desconto:
          type: string
          enum: ["percentual", "valor_fixo"]
          example: "percentual"
        valor_desconto:
          type: number
          format: double
          example: 15.00
        data_inicio:
          type: string
          format: date
          example: "2025-11-10"
        data_fim:
          type: string
          format: date
          example: "2025-11-20"
        ativa:
          type: boolean
          example: true
        produto:
          $ref: '#/components/schemas/Produto'
        preco_promocional:
          type: number
          format: double
          example: 25.49
    
    CriarPromocaoRequest:
      type: object
      required:
        - id_produto
        - id_estabelecimento
        - tipo_desconto
        - valor_desconto
        - data_inicio
        - data_fim
      properties:
        id_produto:
          type: integer
          example: 1
        id_estabelecimento:
          type: integer
          example: 1
        tipo_desconto:
          type: string
          enum: ["percentual", "valor_fixo"]
          example: "percentual"
        valor_desconto:
          type: number
          format: double
          example: 15.00
        data_inicio:
          type: string
          format: date
          example: "2025-11-10"
        data_fim:
          type: string
          format: date
          example: "2025-11-20"

    # REDE SOCIAL
    Post:
      type: object
      properties:
        id_post:
          type: integer
          example: 1
        id_usuario:
          type: integer
          example: 1
        conteudo:
          type: string
          example: "Adorei este produto! Super recomendo!"
        id_produto:
          type: integer
          nullable: true
          example: 1
        curtidas_count:
          type: integer
          example: 15
        comentarios_count:
          type: integer
          example: 3
        data_criacao:
          type: string
          format: date-time
          example: "2025-11-11T10:30:00Z"
        usuario:
          type: object
          properties:
            nome:
              type: string
              example: "Jo√£o Silva"
    
    CriarPostRequest:
      type: object
      required:
        - id_usuario
        - conteudo
      properties:
        id_usuario:
          type: integer
          example: 1
        conteudo:
          type: string
          maxLength: 1000
          example: "Adorei este produto! Super recomendo!"
        id_produto:
          type: integer
          nullable: true
          example: 1

    # AVALIA√á√ïES
    Avaliacao:
      type: object
      properties:
        id_avaliacao:
          type: integer
          example: 1
        id_usuario:
          type: integer
          example: 1
        id_produto:
          type: integer
          example: 1
        nota:
          type: integer
          minimum: 1
          maximum: 5
          example: 5
        comentario:
          type: string
          example: "Produto excelente!"
        data_avaliacao:
          type: string
          format: date-time
          example: "2025-11-11T10:30:00Z"
    
    CriarAvaliacaoRequest:
      type: object
      required:
        - id_usuario
        - nota
      properties:
        id_usuario:
          type: integer
          example: 1
        id_produto:
          type: integer
          example: 1
        nota:
          type: integer
          minimum: 1
          maximum: 5
          example: 5
        comentario:
          type: string
          example: "Produto excelente!"

    # FAVORITOS
    Favorito:
      type: object
      properties:
        id_favorito:
          type: integer
          example: 1
        id_usuario:
          type: integer
          example: 1
        id_produto:
          type: integer
          example: 1
        data_adicao:
          type: string
          format: date-time
          example: "2025-11-11T10:30:00Z"
        produto:
          $ref: '#/components/schemas/Produto'
    
    AdicionarFavoritoRequest:
      type: object
      required:
        - id_usuario
        - id_produto
        - id_estabelecimento
      properties:
        id_usuario:
          type: integer
          example: 1
        id_produto:
          type: integer
          example: 1
        id_estabelecimento:
          type: integer
          example: 1

    # CHAT IA ATUALIZADO
    ChatRequest:
      type: object
      required:
        - mensagem
        - idUsuario
      properties:
        mensagem:
          type: string
          description: Mensagem do usu√°rio para a IA
          example: "quais as promo√ß√µes de leite?"
        idUsuario:
          type: integer
          description: ID do usu√°rio
          example: 1

    ChatResponse:
      type: object
      properties:
        status:
          type: boolean
          example: true
        status_code:
          type: integer
          example: 200
        message:
          type: string
          example: "Resposta gerada com sucesso"
        data:
          type: object
          properties:
            reply:
              type: string
              example: "üõí Encontrei 3 promo√ß√µes de leite perto de voc√™!"
            confidence:
              type: number
              format: float
              example: 0.95
            response_time_ms:
              type: integer
              example: 150

    # GROQ IA SCHEMAS
    GroqRequest:
      type: object
      required:
        - pergunta
      properties:
        pergunta:
          type: string
          description: Pergunta ou mensagem para a IA Groq
          example: "quantos usu√°rios temos cadastrados?"

    GroqResponse:
      type: object
      properties:
        resposta:
          type: string
          description: Resposta interpretada pela IA
          example: "Temos 15 usu√°rios cadastrados no sistema InfoHub."
        fonte:
          type: string
          description: Fonte da resposta (groq, cache, ia_local)
          example: "groq_llama-3.1-8b-instant"
        tempo_resposta:
          type: string
          description: Tempo de processamento da resposta
          example: "real-time"

  responses:
    BadRequest:
      description: Requisi√ß√£o inv√°lida
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            status: false
            status_code: 400
            message: "Dados inv√°lidos fornecidos"
    
    Unauthorized:
      description: Token de autentica√ß√£o inv√°lido ou ausente
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            status: false
            status_code: 401
            message: "Token inv√°lido ou n√£o fornecido"
    
    NotFound:
      description: Recurso n√£o encontrado
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            status: false
            status_code: 404
            message: "Recurso n√£o encontrado"
    
    InternalError:
      description: Erro interno do servidor
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            status: false
            status_code: 500
            message: "Erro interno do servidor"

  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        Token JWT obtido atrav√©s do endpoint /login.
        
        Exemplo de uso:
        ```
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        ```

paths:
  /estabelecimento:
    post:
      tags:
        - Estabelecimentos
      summary: Criar novo estabelecimento
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EstabelecimentoRequest'
      responses:
        '201':
          description: Estabelecimento criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EstabelecimentoResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalError'

  /estabelecimento/{id}:
    put:
      tags:
        - Estabelecimentos
      summary: Atualizar estabelecimento por ID
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EstabelecimentoRequest'
      responses:
        '200':
          description: Estabelecimento atualizado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EstabelecimentoResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      tags:
        - Estabelecimentos
      summary: Deletar estabelecimento por ID
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Estabelecimento deletado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EstabelecimentoResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    get:
      tags:
        - Estabelecimentos
      summary: Buscar estabelecimento por ID
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Estabelecimento encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EstabelecimentoDetailResponse'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /estabelecimentos:
    get:
      tags:
        - Estabelecimentos
      summary: Listar todos os estabelecimentos
      responses:
        '200':
          description: Lista de estabelecimentos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EstabelecimentosListResponse'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /endereco-usuario:
    post:
      tags:
        - Endere√ßos de Usu√°rio
      summary: Criar novo endere√ßo de usu√°rio
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EnderecoUsuarioRequest'
      responses:
        '201':
          description: Endere√ßo criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EnderecoUsuarioResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalError'

  /endereco-usuario/{id}:
    put:
      tags:
        - Endere√ßos de Usu√°rio
      summary: Atualizar endere√ßo de usu√°rio por ID
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EnderecoUsuarioRequest'
      responses:
        '200':
          description: Endere√ßo atualizado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EnderecoUsuarioResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      tags:
        - Endere√ßos de Usu√°rio
      summary: Deletar endere√ßo de usu√°rio por ID
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Endere√ßo deletado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EnderecoUsuarioResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    get:
      tags:
        - Endere√ßos de Usu√°rio
      summary: Buscar endere√ßo de usu√°rio por ID
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Endere√ßo encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EnderecoUsuarioDetailResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /enderecos-usuario:
    get:
      tags:
        - Endere√ßos de Usu√°rio
      summary: Listar todos os endere√ßos de usu√°rio
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Lista de endere√ßos de usu√°rio
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EnderecosUsuarioListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /usuario/{id}/enderecos:
    get:
      tags:
        - Endere√ßos de Usu√°rio
      summary: Buscar endere√ßos por ID do usu√°rio
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Endere√ßos do usu√°rio encontrados
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EnderecosUsuarioListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /categoria:
    post:
      tags:
        - Categorias
      summary: Criar nova categoria
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CategoriaRequest'
      responses:
        '201':
          description: Categoria criada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoriaResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalError'

  /categoria/{id}:
    put:
      tags:
        - Categorias
      summary: Atualizar categoria por ID
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CategoriaRequest'
      responses:
        '200':
          description: Categoria atualizada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoriaResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      tags:
        - Categorias
      summary: Deletar categoria por ID
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Categoria deletada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoriaResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    get:
      tags:
        - Categorias
      summary: Buscar categoria por ID
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Categoria encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoriaDetailResponse'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /categorias:
    get:
      tags:
        - Categorias
      summary: Listar todas as categorias
      responses:
        '200':
          description: Lista de categorias
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoriasListResponse'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /categorias-produtos:
    get:
      tags:
        - Categorias
      summary: Listar todas as categorias com seus produtos
      responses:
        '200':
          description: Lista de categorias com produtos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoriasComProdutosResponse'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /categoria-produtos/{id}:
    get:
      tags:
        - Categorias
      summary: Buscar categoria por ID com seus produtos
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Categoria encontrada com produtos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoriaComProdutosDetailResponse'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'
  /produtos:
    post:
      tags:
        - Produtos
      summary: Criar novo produto
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProdutoRequest'
      responses:
        '201':
          description: Produto criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProdutoResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalError'

    get:
      tags:
        - Produtos
      summary: Listar todos os produtos
      responses:
        '200':
          description: Lista de produtos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProdutosListResponse'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /produto/{id}:
    put:
      tags:
        - Produtos
      summary: Atualizar produto por ID
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProdutoRequest'
      responses:
        '200':
          description: Produto atualizado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProdutoResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    delete:
      tags:
        - Produtos
      summary: Deletar produto por ID
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Produto deletado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProdutoResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

    get:
      tags:
        - Produtos
      summary: Buscar produto por ID
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Produto encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProdutoDetailResponse'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  # ==============================
  # API PRINCIPAL (Node.js - Porta 8080)
  # ==============================
  
  # USU√ÅRIOS
  /usuarios/cadastro:
    post:
      tags:
        - Usu√°rios
      summary: Cadastrar novo usu√°rio
      description: Cria um novo usu√°rio no sistema
      servers:
        - url: http://localhost:8080/v1/infohub
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Usuario'
            example:
              nome: "Jo√£o Silva"
              email: "joao@email.com"
              senha: "123456"
              data_nascimento: "1990-05-15"
              telefone: "(11) 99999-9999"
      responses:
        '201':
          description: Usu√°rio criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UsuarioResponse'
        '400':
          description: Dados inv√°lidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Email j√° existe
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
                
  /usuarios:
    get:
      tags:
        - Usu√°rios
      summary: Listar todos os usu√°rios
      description: Retorna lista de todos os usu√°rios cadastrados
      servers:
        - url: http://localhost:8080/v1/infohub
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Lista de usu√°rios
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Usuario'
        '401':
          description: Token inv√°lido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
                
  /usuario/{id}:
    get:
      tags:
        - Usu√°rios
      summary: Buscar usu√°rio por ID
      description: Retorna dados de um usu√°rio espec√≠fico
      servers:
        - url: http://localhost:8080/v1/infohub
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          example: 1
      responses:
        '200':
          description: Dados do usu√°rio
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UsuarioResponse'
        '404':
          description: Usu√°rio n√£o encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
                
    put:
      tags:
        - Usu√°rios
      summary: Atualizar usu√°rio
      description: Atualiza dados de um usu√°rio existente
      servers:
        - url: http://localhost:8080/v1/infohub
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Usuario'
      responses:
        '200':
          description: Usu√°rio atualizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UsuarioResponse'
        '404':
          description: Usu√°rio n√£o encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
                
    delete:
      tags:
        - Usu√°rios
      summary: Deletar usu√°rio
      description: Remove um usu√°rio do sistema
      servers:
        - url: http://localhost:8080/v1/infohub
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          example: 1
      responses:
        '200':
          description: Usu√°rio deletado
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Usu√°rio deletado com sucesso"
        '404':
          description: Usu√°rio n√£o encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # AUTENTICA√á√ÉO
  /login:
    post:
      tags:
        - Autentica√ß√£o
      summary: Fazer login
      description: Autentica usu√°rio e retorna JWT token
      servers:
        - url: http://localhost:8080/v1/infohub
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: Login realizado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        '401':
          description: Credenciais inv√°lidas
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # RECUPERA√á√ÉO DE SENHA
  /recuperar-senha:
    post:
      tags:
        - Recupera√ß√£o de Senha
      summary: Solicitar recupera√ß√£o de senha
      description: Envia c√≥digo de recupera√ß√£o por email
      servers:
        - url: http://localhost:8080/v1/infohub
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RecuperacaoSenhaRequest'
      responses:
        '200':
          description: C√≥digo enviado por email
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "C√≥digo de recupera√ß√£o enviado para o email"
        '404':
          description: Email n√£o encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
                
  /validar-codigo:
    post:
      tags:
        - Recupera√ß√£o de Senha
      summary: Validar c√≥digo de recupera√ß√£o
      description: Valida o c√≥digo enviado por email
      servers:
        - url: http://localhost:8080/v1/infohub
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ValidarCodigoRequest'
      responses:
        '200':
          description: C√≥digo v√°lido
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "C√≥digo v√°lido"
        '400':
          description: C√≥digo inv√°lido ou expirado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
                
  /redefinir-senha:
    post:
      tags:
        - Recupera√ß√£o de Senha
      summary: Redefinir senha
      description: Define nova senha ap√≥s valida√ß√£o do c√≥digo
      servers:
        - url: http://localhost:8080/v1/infohub
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RedefinirSenhaRequest'
      responses:
        '200':
          description: Senha redefinida com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Senha redefinida com sucesso"
        '400':
          description: C√≥digo inv√°lido ou dados incorretos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # CHAT IA (API Principal)
  /interagir:
    post:
      tags:
        - Chat IA
      summary: Interagir com IA
      description: |
        Endpoint principal para chat com IA. A IA pode responder sobre:
        - Busca de promo√ß√µes espec√≠ficas: "leite barato"
        - Lista geral de promo√ß√µes: "quais as promo√ß√µes?"
        - Melhores pre√ßos por regi√£o: "melhor pre√ßo de arroz perto"
        - Informa√ß√µes sobre produtos: "que produtos t√™m?"
        - Como funciona: "como usar o sistema?"
      servers:
        - url: http://localhost:8080/v1/infohub
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChatRequest'
            examples:
              busca_especifica:
                summary: Busca produto espec√≠fico
                value:
                  mensagem: "leite barato"
                  idUsuario: 1
              lista_geral:
                summary: Lista todas as promo√ß√µes
                value:
                  mensagem: "quais as promo√ß√µes?"
                  idUsuario: 1
              melhor_preco:
                summary: Melhores pre√ßos por regi√£o
                value:
                  mensagem: "melhor pre√ßo de arroz perto de mim"
                  idUsuario: 1
              ajuda:
                summary: Como funciona
                value:
                  mensagem: "como funciona o sistema?"
                  idUsuario: 1
      responses:
        '200':
          description: Resposta da IA
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatResponse'
              examples:
                promocoes_encontradas:
                  summary: Promo√ß√µes encontradas
                  value:
                    status: true
                    status_code: 200
                    message: "Resposta gerada com sucesso"
                    data:
                      reply: "üõí **Encontrei leite!**\n\n‚Ä¢ **Leite Integral 1L** no **Supermercado Central**\nüí∞ **R$ 4,99** ‚Ä¢ üìç **2.6 km** ‚Ä¢ üìÖ at√© **2025-10-31**"
                      confidence: 0.95
                      response_time_ms: 150
                      toolsUsed: ["classifier", "find_promotions"]
                lista_promocoes:
                  summary: Lista de promo√ß√µes
                  value:
                    status: true
                    status_code: 200
                    data:
                      reply: "üõçÔ∏è **3 promo√ß√µes ativas perto de voc√™:**\n\n**1.** Detergente - Supermercado Central\nüí∞ R$ 2,99 ‚Ä¢ üìç 2.6 km"
                      confidence: 0.90
                      response_time_ms: 200
        '400':
          description: Dados inv√°lidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Token inv√°lido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # GROQ IA DIRETO
  /groq:
    post:
      tags:
        - ü§ñ Chat IA
      summary: Intera√ß√£o direta com IA Groq
      description: |
        Endpoint para comunica√ß√£o direta com a IA Groq. Processa perguntas sobre:
        - Dados de usu√°rios cadastrados
        - Informa√ß√µes sobre produtos
        - Estat√≠sticas gerais do sistema
        - An√°lise inteligente de dados
        
        **Funcionalidades:**
        - Processamento com m√∫ltiplos modelos Groq
        - Sistema de cache para respostas frequentes
        - Fallback para IA local se Groq falhar
        - Resposta sempre garantida (nunca falha)
      servers:
        - url: http://localhost:8080/v1/infohub
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroqRequest'
            examples:
              usuarios:
                summary: Consultar usu√°rios
                value:
                  pergunta: "quantos usu√°rios temos cadastrados?"
              produtos:
                summary: Consultar produtos
                value:
                  pergunta: "que produtos temos no sistema?"
              resumo:
                summary: Resumo geral
                value:
                  pergunta: "me d√™ um resumo do sistema"
      responses:
        '200':
          description: Resposta da IA processada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroqResponse'
              examples:
                usuarios_resposta:
                  summary: Resposta sobre usu√°rios
                  value:
                    resposta: "Temos 15 usu√°rios cadastrados no sistema InfoHub. Eles incluem consumidores, administradores e estabelecimentos parceiros."
                    fonte: "groq_llama-3.1-8b-instant"
                    tempo_resposta: "real-time"
                cache_resposta:
                  summary: Resposta do cache
                  value:
                    resposta: "O sistema possui 45 produtos cadastrados em diferentes categorias."
                    fonte: "cache"
                    tempo_resposta: "< 1ms"
        '400':
          description: Dados inv√°lidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Erro interno (com fallback local)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroqResponse'

  /chat-groq:
    post:
      tags:
        - ü§ñ Chat IA
      summary: Chat com IA Groq (Endpoint Alternativo)
      description: |
        Endpoint alternativo para chat com IA Groq. Funcionalidade id√™ntica ao `/groq`.
        
        **Caracter√≠sticas:**
        - Mesmo processamento do endpoint `/groq`
        - Interface alternativa para compatibilidade
        - An√°lise inteligente de perguntas
        - Respostas contextualizadas
      servers:
        - url: http://localhost:8080/v1/infohub
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroqRequest'
      responses:
        '200':
          description: Resposta da IA
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroqResponse'
        '400':
          description: Dados inv√°lidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Erro interno (com fallback local)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroqResponse'
                
  # ===============================
  # üõí CARRINHO DE COMPRAS
  # ===============================
  /carrinho:
    post:
      tags:
        - üõí Carrinho
      summary: Adicionar item ao carrinho
      description: Adiciona um produto ao carrinho do usu√°rio
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdicionarCarrinhoRequest'
      responses:
        '201':
          description: Item adicionado ao carrinho
        '400':
          description: Dados inv√°lidos
    
    get:
      tags:
        - üõí Carrinho
      summary: Listar itens do carrinho
      description: Lista todos os itens do carrinho do usu√°rio
      security:
        - BearerAuth: []
      parameters:
        - name: id_usuario
          in: query
          required: true
          schema:
            type: integer
          example: 1
      responses:
        '200':
          description: Lista de itens do carrinho
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  carrinho:
                    type: array
                    items:
                      $ref: '#/components/schemas/CarrinhoItem'
                  valor_total:
                    type: number
                    format: double
                    example: 59.97

  /carrinho/{id}:
    put:
      tags:
        - üõí Carrinho
      summary: Atualizar quantidade no carrinho
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                quantidade:
                  type: integer
                  minimum: 1
                  example: 3
      responses:
        '200':
          description: Quantidade atualizada
    
    delete:
      tags:
        - üõí Carrinho
      summary: Remover item do carrinho
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Item removido do carrinho

  /carrinho/limpar/{id_usuario}:
    delete:
      tags:
        - üõí Carrinho
      summary: Limpar carrinho
      description: Remove todos os itens do carrinho do usu√°rio
      security:
        - BearerAuth: []
      parameters:
        - name: id_usuario
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Carrinho limpo com sucesso

  # ===============================
  # üìã PEDIDOS
  # ===============================
  /pedido:
    post:
      tags:
        - üìã Pedidos
      summary: Finalizar compra
      description: Cria um pedido a partir dos itens do carrinho
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CriarPedidoRequest'
      responses:
        '201':
          description: Pedido criado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  pedido:
                    $ref: '#/components/schemas/Pedido'

  /pedido/{id}:
    get:
      tags:
        - üìã Pedidos
      summary: Buscar pedido por ID
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Dados do pedido
          content:
            application/json:
              schema:
                type: object
                properties:
                  pedido:
                    $ref: '#/components/schemas/Pedido'

  /pedidos/usuario/{id_usuario}:
    get:
      tags:
        - üìã Pedidos
      summary: Listar pedidos do usu√°rio
      security:
        - BearerAuth: []
      parameters:
        - name: id_usuario
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Lista de pedidos do usu√°rio
          content:
            application/json:
              schema:
                type: object
                properties:
                  pedidos:
                    type: array
                    items:
                      $ref: '#/components/schemas/Pedido'

  # ===============================
  # üí∞ PROMO√á√ïES
  # ===============================
  /promocoes:
    post:
      tags:
        - üí∞ Promo√ß√µes
      summary: Criar promo√ß√£o
      description: Cria uma nova promo√ß√£o (admin ou estabelecimento)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CriarPromocaoRequest'
      responses:
        '201':
          description: Promo√ß√£o criada com sucesso
    
    get:
      tags:
        - üí∞ Promo√ß√µes
      summary: Listar promo√ß√µes ativas
      description: Lista todas as promo√ß√µes ativas no sistema
      responses:
        '200':
          description: Lista de promo√ß√µes ativas
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  promocoes:
                    type: array
                    items:
                      $ref: '#/components/schemas/Promocao'

  /promocoes/melhores:
    get:
      tags:
        - üí∞ Promo√ß√µes
      summary: Melhores promo√ß√µes
      description: Lista as melhores promo√ß√µes ordenadas por desconto
      responses:
        '200':
          description: Lista das melhores promo√ß√µes
          content:
            application/json:
              schema:
                type: object
                properties:
                  promocoes:
                    type: array
                    items:
                      $ref: '#/components/schemas/Promocao'

  /promocoes/melhores/{limit}:
    get:
      tags:
        - üí∞ Promo√ß√µes
      summary: Melhores promo√ß√µes com limite
      parameters:
        - name: limit
          in: path
          required: true
          schema:
            type: integer
          example: 10
      responses:
        '200':
          description: Lista limitada das melhores promo√ß√µes

  /promocoes/produto/{id_produto}:
    get:
      tags:
        - üí∞ Promo√ß√µes
      summary: Promo√ß√µes de um produto
      parameters:
        - name: id_produto
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Lista de promo√ß√µes do produto

  /promocao/{id_promocao}:
    get:
      tags:
        - üí∞ Promo√ß√µes
      summary: Buscar promo√ß√£o por ID
      parameters:
        - name: id_promocao
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Dados da promo√ß√£o
    
    put:
      tags:
        - üí∞ Promo√ß√µes
      summary: Atualizar promo√ß√£o
      security:
        - BearerAuth: []
      parameters:
        - name: id_promocao
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CriarPromocaoRequest'
      responses:
        '200':
          description: Promo√ß√£o atualizada
    
    delete:
      tags:
        - üí∞ Promo√ß√µes
      summary: Deletar promo√ß√£o
      security:
        - BearerAuth: []
      parameters:
        - name: id_promocao
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Promo√ß√£o deletada

  # ===============================
  # üåê REDE SOCIAL
  # ===============================
  /posts:
    post:
      tags:
        - üåê Rede Social
      summary: Criar post
      description: Cria um novo post na rede social
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CriarPostRequest'
      responses:
        '201':
          description: Post criado com sucesso

  /posts/feed:
    get:
      tags:
        - üåê Rede Social
      summary: Feed de posts
      description: Lista posts do feed principal
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Lista de posts do feed
          content:
            application/json:
              schema:
                type: object
                properties:
                  posts:
                    type: array
                    items:
                      $ref: '#/components/schemas/Post'

  /posts/feed/{page}/{limit}:
    get:
      tags:
        - üåê Rede Social
      summary: Feed com pagina√ß√£o
      security:
        - BearerAuth: []
      parameters:
        - name: page
          in: path
          required: true
          schema:
            type: integer
          example: 1
        - name: limit
          in: path
          required: true
          schema:
            type: integer
          example: 10
      responses:
        '200':
          description: Posts paginados

  /posts/usuario/{id_usuario}:
    get:
      tags:
        - üåê Rede Social
      summary: Posts de um usu√°rio
      security:
        - BearerAuth: []
      parameters:
        - name: id_usuario
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Lista de posts do usu√°rio

  /post/{id_post}:
    get:
      tags:
        - üåê Rede Social
      summary: Buscar post por ID
      security:
        - BearerAuth: []
      parameters:
        - name: id_post
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Dados do post
    
    put:
      tags:
        - üåê Rede Social
      summary: Atualizar post
      security:
        - BearerAuth: []
      parameters:
        - name: id_post
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CriarPostRequest'
      responses:
        '200':
          description: Post atualizado
    
    delete:
      tags:
        - üåê Rede Social
      summary: Deletar post
      security:
        - BearerAuth: []
      parameters:
        - name: id_post
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Post deletado

  /post/{id_post}/curtir:
    post:
      tags:
        - üåê Rede Social
      summary: Curtir/Descurtir post
      security:
        - BearerAuth: []
      parameters:
        - name: id_post
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                id_usuario:
                  type: integer
                  example: 1
      responses:
        '200':
          description: Curtida processada

  /post/{id_post}/comentario:
    post:
      tags:
        - üåê Rede Social
      summary: Comentar post
      security:
        - BearerAuth: []
      parameters:
        - name: id_post
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                id_usuario:
                  type: integer
                  example: 1
                conteudo:
                  type: string
                  example: "√ìtimo post!"
      responses:
        '201':
          description: Coment√°rio criado

  /post/{id_post}/comentarios:
    get:
      tags:
        - üåê Rede Social
      summary: Listar coment√°rios
      security:
        - BearerAuth: []
      parameters:
        - name: id_post
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Lista de coment√°rios

  # ===============================
  # ‚≠ê AVALIA√á√ïES
  # ===============================
  /avaliacoes:
    post:
      tags:
        - ‚≠ê Avalia√ß√µes
      summary: Criar avalia√ß√£o
      description: Cria uma nova avalia√ß√£o para produto ou estabelecimento
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CriarAvaliacaoRequest'
      responses:
        '201':
          description: Avalia√ß√£o criada com sucesso

  /avaliacoes/produto/{id_produto}:
    get:
      tags:
        - ‚≠ê Avalia√ß√µes
      summary: Listar avalia√ß√µes de produto
      parameters:
        - name: id_produto
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Lista de avalia√ß√µes do produto
          content:
            application/json:
              schema:
                type: object
                properties:
                  avaliacoes:
                    type: array
                    items:
                      $ref: '#/components/schemas/Avaliacao'

  /avaliacoes/produtos/mais-bem-avaliados:
    get:
      tags:
        - ‚≠ê Avalia√ß√µes
      summary: Produtos mais bem avaliados
      responses:
        '200':
          description: Lista de produtos mais bem avaliados

  /avaliacoes/produtos/mais-bem-avaliados/{limit}:
    get:
      tags:
        - ‚≠ê Avalia√ß√µes
      summary: Produtos mais bem avaliados com limite
      parameters:
        - name: limit
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Lista limitada de produtos mais bem avaliados

  # ===============================
  # ‚ù§Ô∏è FAVORITOS
  # ===============================
  /favoritos:
    post:
      tags:
        - ‚ù§Ô∏è Favoritos
      summary: Adicionar aos favoritos
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdicionarFavoritoRequest'
      responses:
        '201':
          description: Produto adicionado aos favoritos

  /favoritos/usuario/{id_usuario}:
    get:
      tags:
        - ‚ù§Ô∏è Favoritos
      summary: Listar favoritos do usu√°rio
      security:
        - BearerAuth: []
      parameters:
        - name: id_usuario
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Lista de favoritos do usu√°rio
          content:
            application/json:
              schema:
                type: object
                properties:
                  favoritos:
                    type: array
                    items:
                      $ref: '#/components/schemas/Favorito'

  /favorito/{id}:
    delete:
      tags:
        - ‚ù§Ô∏è Favoritos
      summary: Remover dos favoritos
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Produto removido dos favoritos

  # ===============================
  # üìß NOTIFICA√á√ïES
  # ===============================
  /notificacoes/usuario/{id_usuario}:
    get:
      tags:
        - üìß Notifica√ß√µes
      summary: Listar notifica√ß√µes do usu√°rio
      security:
        - BearerAuth: []
      parameters:
        - name: id_usuario
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Lista de notifica√ß√µes

  /notificacao/{id}/marcar-lida:
    put:
      tags:
        - üìß Notifica√ß√µes
      summary: Marcar notifica√ß√£o como lida
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Notifica√ß√£o marcada como lida

  /respostaOllama:
    post:
      tags:
        - ü§ñ Chat IA
      summary: Resposta Ollama (Legacy)
      description: Endpoint legacy para compatibilidade. Use /interagir para novas implementa√ß√µes.
      servers:
        - url: http://localhost:8080/v1/infohub
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChatRequest'
      responses:
        '200':
          description: Resposta processada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatResponse'

